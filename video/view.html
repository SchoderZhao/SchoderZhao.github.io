<!DOCTYPE html>
<html>
<head>
	<title>GitHub Pages Folder Viewer</title>
	<script src="https://cdn.jsdelivr.net/npm/qrcode@1.4.4/qrcode.min.js"></script>
</head>
<body>
	<h1>GitHub Pages Folder Viewer</h1>
	<div id="file-list"></div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="list-files.js"></script>
	<script>
		$(function() {
			var url = window.location.href;
			var folder = url.substring(0, url.lastIndexOf('/')) + '/';
			$.ajax({
				url: folder,
				success: function(data) {
					var files = [];
					$(data).find("a").each(function() {
						var href = $(this).attr("href");
						if (href.endsWith(".html") || href.endsWith(".htm")) {
							files.push(href);
						}
					});
					if (files.length > 0) {
						var fileList = "<ul>";
						for (var i = 0; i < files.length; i++) {
							fileList += "<li><a href=\"" + folder + files[i] + "\">" + files[i] + "</a></li>";
							var qrcode = new QRCode(document.createElement("div"), {
								text: folder + files[i],
								width: 128,
								height: 128,
								colorDark : "#000000",
								colorLight : "#ffffff",
								correctLevel : QRCode.CorrectLevel.H
							});
							fileList += "<div id=\"qrcode-" + i + "\"></div>";
							$("#qrcode-" + i).append(qrcode.canvas);
						}
						fileList += "</ul>";
						$("#file-list").html(fileList);
					} else {
						$("#file-list").html("<p>No files found.</p>");
					}
				},
				error: function() {
					$("#file-list").html("<p>Error loading files.</p>");
				}
			});
		});
	</script>
</body>
</html>
